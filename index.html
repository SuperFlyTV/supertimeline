<!DOCTYPE html><html class="default"><head><meta charSet="utf-8"/><meta http-equiv="x-ua-compatible" content="IE=edge"/><title>superfly-timeline</title><meta name="description" content="Documentation for superfly-timeline"/><meta name="viewport" content="width=device-width, initial-scale=1"/><link rel="stylesheet" href="assets/style.css"/><link rel="stylesheet" href="assets/highlight.css"/><script async src="assets/search.js" id="search-script"></script></head><body><script>document.body.classList.add(localStorage.getItem("tsd-theme") || "os")</script><header><div class="tsd-page-toolbar"><div class="container"><div class="table-wrap"><div class="table-cell" id="tsd-search" data-base="."><div class="field"><label for="tsd-search-field" class="tsd-widget search no-caption">Search</label><input type="text" id="tsd-search-field"/></div><ul class="results"><li class="state loading">Preparing search index...</li><li class="state failure">The search index is not available</li></ul><a href="index.html" class="title">superfly-timeline</a></div><div class="table-cell" id="tsd-widgets"><div id="tsd-filter"><a href="#" class="tsd-widget options no-caption" data-toggle="options">Options</a><div class="tsd-filter-group"><div class="tsd-select" id="tsd-filter-visibility"><span class="tsd-select-label">All</span><ul class="tsd-select-list"><li data-value="public">Public</li><li data-value="protected">Public/Protected</li><li data-value="private" class="selected">All</li></ul></div> <input type="checkbox" id="tsd-filter-inherited" checked/><label class="tsd-widget" for="tsd-filter-inherited">Inherited</label><input type="checkbox" id="tsd-filter-externals" checked/><label class="tsd-widget" for="tsd-filter-externals">Externals</label></div></div><a href="#" class="tsd-widget menu no-caption" data-toggle="menu">Menu</a></div></div></div></div><div class="tsd-page-title"><div class="container"><h1>superfly-timeline </h1></div></div></header><div class="container container-main"><div class="row"><div class="col-8 col-content"><div class="tsd-panel tsd-typography">
<a href="#superfly-timeline" id="superfly-timeline" style="color: inherit; text-decoration: none;">
  <h1>SuperFly-Timeline</h1>
</a>
<p><a href="https://github.com/SuperFlyTV/supertimeline/actions/workflows/node.yml"><img src="https://github.com/SuperFlyTV/supertimeline/actions/workflows/node.yml/badge.svg" alt="Node CI"></a>
<a href="https://codecov.io/gh/SuperFlyTV/supertimeline"><img src="https://codecov.io/gh/SuperFlyTV/supertimeline/branch/master/graph/badge.svg" alt="codecov"></a>
<a href="https://www.npmjs.com/package/superfly-timeline"><img src="https://img.shields.io/npm/v/superfly-timeline" alt="npm"></a></p>
<p>The SuperFly-Timeline is a collection of rules as well as a resolver for placing objects on a virtual timeline. It uses the concept of timing objects in sequences -– absolute or relative timings -– which resolves recursively in nested structures. This means it supports grouping, combinations of timing between groups, and objects within groups. It also supports logical conditions instead of timed conditions.</p>
<p>It is used in the <a href="https://github.com/nrkno/Sofie-TV-automation/"><strong>Sofie</strong> TV News Studio Automation System</a>.</p>

<a href="#installation" id="installation" style="color: inherit; text-decoration: none;">
  <h2>Installation</h2>
</a>

<a href="#nodejs" id="nodejs" style="color: inherit; text-decoration: none;">
  <h3>NodeJS</h3>
</a>
<p><code>$ npm install --save superfly-timeline</code></p>

<a href="#web-browser" id="web-browser" style="color: inherit; text-decoration: none;">
  <h3>Web browser</h3>
</a>
<p>Can be run in the browser using <em>browserify</em> or the like.</p>

<a href="#getting-started" id="getting-started" style="color: inherit; text-decoration: none;">
  <h2>Getting started</h2>
</a>
<p><a href="https://jsfiddle.net/nytamin/rztp517u/">Try it in JSFiddle!</a></p>
<pre><code class="language-javascript"><span class="hl-0">var</span><span class="hl-1"> </span><span class="hl-2">Timeline</span><span class="hl-1"> = </span><span class="hl-3">require</span><span class="hl-1">(</span><span class="hl-4">&#39;superfly-timeline&#39;</span><span class="hl-1">)</span><br/><br/><span class="hl-5">// The input to the timeline is an array of objects:</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">myTimeline</span><span class="hl-1"> = [</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-4">&#39;video0&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">layer:</span><span class="hl-1"> </span><span class="hl-4">&#39;L1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">enable:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-7">10</span><span class="hl-1">,</span><br/><span class="hl-1">            </span><span class="hl-2">end:</span><span class="hl-1"> </span><span class="hl-7">100</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-2">content:</span><span class="hl-1"> {},</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-5">// This object defines a graphic, to be overlaid on the video</span><br/><span class="hl-1">        </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-4">&#39;graphic0&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">layer:</span><span class="hl-1"> </span><span class="hl-4">&#39;L2&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">enable:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-4">&#39;#video0.start + 10&#39;</span><span class="hl-1">, </span><span class="hl-5">// 10 after video0 starts</span><br/><span class="hl-1">            </span><span class="hl-2">duration:</span><span class="hl-1"> </span><span class="hl-7">10</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-2">content:</span><span class="hl-1"> {},</span><br/><span class="hl-1">        </span><span class="hl-2">classes:</span><span class="hl-1"> [</span><span class="hl-4">&#39;graphics&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-4">&#39;graphic1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">layer:</span><span class="hl-1"> </span><span class="hl-4">&#39;L2&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">enable:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-4">&#39;#graphic0.end + 10&#39;</span><span class="hl-1">, </span><span class="hl-5">// 10 after graphic0 ends</span><br/><span class="hl-1">            </span><span class="hl-2">duration:</span><span class="hl-1"> </span><span class="hl-7">15</span><span class="hl-1">,</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-2">content:</span><span class="hl-1"> {},</span><br/><span class="hl-1">        </span><span class="hl-2">classes:</span><span class="hl-1"> [</span><span class="hl-4">&#39;graphics&#39;</span><span class="hl-1">],</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    {</span><br/><span class="hl-1">        </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-4">&#39;graphicBackground&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">layer:</span><span class="hl-1"> </span><span class="hl-4">&#39;L3&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">enable:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">while:</span><span class="hl-1"> </span><span class="hl-4">&#39;!.graphics&#39;</span><span class="hl-1">, </span><span class="hl-5">// When no graphics are playing</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-2">content:</span><span class="hl-1"> {},</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">]</span><br/><br/><span class="hl-5">// When we have a new timeline, the first thing to do is to &quot;Resolve&quot; it.</span><br/><span class="hl-5">// This calculates all timings of the objects in the timeline.</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">options</span><span class="hl-1"> = {</span><br/><span class="hl-1">    </span><span class="hl-2">time:</span><span class="hl-1"> </span><span class="hl-7">0</span><span class="hl-1">,</span><br/><span class="hl-1">}</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">resolvedTimeline</span><span class="hl-1"> = </span><span class="hl-2">Timeline</span><span class="hl-1">.</span><span class="hl-2">Resolver</span><span class="hl-1">.</span><span class="hl-3">resolveTimeline</span><span class="hl-1">(</span><span class="hl-2">myTimeline</span><span class="hl-1">, </span><span class="hl-2">options</span><span class="hl-1">)</span><br/><br/><span class="hl-5">// Use the resolved timeline and pre-calculate states, instance collisions, etc.</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">resolvedStates</span><span class="hl-1"> = </span><span class="hl-2">Timeline</span><span class="hl-1">.</span><span class="hl-2">Resolver</span><span class="hl-1">.</span><span class="hl-3">resolveAllStates</span><span class="hl-1">(</span><span class="hl-2">resolvedTimeline</span><span class="hl-1">)</span><br/><br/><span class="hl-5">// Fetch the state at time 10:</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">state0</span><span class="hl-1"> = </span><span class="hl-2">Timeline</span><span class="hl-1">.</span><span class="hl-2">Resolver</span><span class="hl-1">.</span><span class="hl-3">getState</span><span class="hl-1">(</span><span class="hl-2">resolvedStates</span><span class="hl-1">, </span><span class="hl-7">10</span><span class="hl-1">)</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">`At the time </span><span class="hl-0">${</span><span class="hl-2">state0</span><span class="hl-8">.</span><span class="hl-2">time</span><span class="hl-0">}</span><span class="hl-4">, the active objects are &quot;</span><span class="hl-0">${</span><span class="hl-2">_</span><span class="hl-8">.</span><span class="hl-3">map</span><span class="hl-8">(</span><span class="hl-2">state0</span><span class="hl-8">.</span><span class="hl-2">layers</span><span class="hl-8">, (</span><span class="hl-2">o</span><span class="hl-8">, </span><span class="hl-2">l</span><span class="hl-8">) </span><span class="hl-0">=&gt;</span><span class="hl-8"> </span><span class="hl-4">`</span><span class="hl-0">${</span><span class="hl-2">o</span><span class="hl-8">.</span><span class="hl-2">id</span><span class="hl-0">}</span><span class="hl-4"> at layer </span><span class="hl-0">${</span><span class="hl-2">l</span><span class="hl-0">}</span><span class="hl-4">`</span><span class="hl-8">).</span><span class="hl-3">join</span><span class="hl-8">(</span><br/><span class="hl-8">        </span><span class="hl-4">&#39;, &#39;</span><br/><span class="hl-8">    )</span><span class="hl-0">}</span><span class="hl-4">&quot;`</span><br/><span class="hl-1">)</span><br/><br/><span class="hl-5">// Fetch the state at time 25:</span><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">state1</span><span class="hl-1"> = </span><span class="hl-2">Timeline</span><span class="hl-1">.</span><span class="hl-2">Resolver</span><span class="hl-1">.</span><span class="hl-3">getState</span><span class="hl-1">(</span><span class="hl-2">resolvedStates</span><span class="hl-1">, </span><span class="hl-7">25</span><span class="hl-1">)</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">`At the time </span><span class="hl-0">${</span><span class="hl-2">state1</span><span class="hl-8">.</span><span class="hl-2">time</span><span class="hl-0">}</span><span class="hl-4">, the active objects are &quot;</span><span class="hl-0">${</span><span class="hl-2">_</span><span class="hl-8">.</span><span class="hl-3">map</span><span class="hl-8">(</span><span class="hl-2">state1</span><span class="hl-8">.</span><span class="hl-2">layers</span><span class="hl-8">, (</span><span class="hl-2">o</span><span class="hl-8">, </span><span class="hl-2">l</span><span class="hl-8">) </span><span class="hl-0">=&gt;</span><span class="hl-8"> </span><span class="hl-4">`</span><span class="hl-0">${</span><span class="hl-2">o</span><span class="hl-8">.</span><span class="hl-2">id</span><span class="hl-0">}</span><span class="hl-4"> at layer </span><span class="hl-0">${</span><span class="hl-2">l</span><span class="hl-0">}</span><span class="hl-4">`</span><span class="hl-8">).</span><span class="hl-3">join</span><span class="hl-8">(</span><br/><span class="hl-8">        </span><span class="hl-4">&#39;, &#39;</span><br/><span class="hl-8">    )</span><span class="hl-0">}</span><span class="hl-4">&quot;`</span><br/><span class="hl-1">)</span><br/><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">`The object &quot;graphicBackground&quot; will play at [</span><span class="hl-0">${</span><span class="hl-2">_</span><span class="hl-8">.</span><span class="hl-3">map</span><span class="hl-8">(</span><br/><span class="hl-8">        </span><span class="hl-2">resolvedTimeline</span><span class="hl-8">.</span><span class="hl-2">objects</span><span class="hl-8">[</span><span class="hl-4">&#39;graphicBackground&#39;</span><span class="hl-8">].</span><span class="hl-2">resolved</span><span class="hl-8">.</span><span class="hl-2">instances</span><span class="hl-8">,</span><br/><span class="hl-8">        (</span><span class="hl-2">instance</span><span class="hl-8">) </span><span class="hl-0">=&gt;</span><span class="hl-8"> </span><span class="hl-4">`</span><span class="hl-0">${</span><span class="hl-2">instance</span><span class="hl-8">.</span><span class="hl-2">start</span><span class="hl-0">}</span><span class="hl-4"> to </span><span class="hl-0">${</span><span class="hl-2">instance</span><span class="hl-8">.</span><span class="hl-2">end</span><span class="hl-0">}</span><span class="hl-4">`</span><br/><span class="hl-8">    ).</span><span class="hl-3">join</span><span class="hl-8">(</span><span class="hl-4">&#39;, &#39;</span><span class="hl-8">)</span><span class="hl-0">}</span><span class="hl-4">]`</span><br/><span class="hl-1">)</span><br/><br/><span class="hl-0">const</span><span class="hl-1"> </span><span class="hl-6">nextEvent</span><span class="hl-1"> = </span><span class="hl-2">state1</span><span class="hl-1">.</span><span class="hl-2">nextEvents</span><span class="hl-1">[</span><span class="hl-7">0</span><span class="hl-1">]</span><br/><span class="hl-2">console</span><span class="hl-1">.</span><span class="hl-3">log</span><span class="hl-1">(</span><br/><span class="hl-1">    </span><span class="hl-4">`After the time </span><span class="hl-0">${</span><span class="hl-2">state1</span><span class="hl-8">.</span><span class="hl-2">time</span><span class="hl-0">}</span><span class="hl-4">, the next event to happen will be at time </span><span class="hl-0">${</span><span class="hl-2">nextEvent</span><span class="hl-8">.</span><span class="hl-2">time</span><span class="hl-0">}</span><span class="hl-4">. The event is related to the object &quot;</span><span class="hl-0">${</span><span class="hl-2">nextEvent</span><span class="hl-8">.</span><span class="hl-2">objId</span><span class="hl-0">}</span><span class="hl-4">&quot;`</span><br/><span class="hl-1">)</span><br/><br/><span class="hl-5">// Output:</span><br/><span class="hl-5">// At the time 10, the active objects are &quot;video0 at layer L1, graphicBackground at layer L3&quot;</span><br/><span class="hl-5">// At the time 25, the active objects are &quot;video0 at layer L1, graphic0 at layer L2&quot;</span><br/><span class="hl-5">// The object &quot;graphicBackground&quot; will play at &quot;0 to 20, 30 to 40, 55 to null&quot;</span><br/><span class="hl-5">// After the time 25, the next event to happen will be at time 30. The event is related to the object &quot;graphic0&quot;</span>
</code></pre>

<a href="#api" id="api" style="color: inherit; text-decoration: none;">
  <h1>API</h1>
</a>
<p>The logic is set by setting properties in the <code>.enable</code> property.</p>
<table>
<thead>
<tr>
<th>Property</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>.start</code></td>
<td>The start time of the object. (cannot be combined with <code>.while</code>)</td>
</tr>
<tr>
<td><code>.end</code></td>
<td>The end time of the object (cannot be combined with <code>.while</code> or <code>.duration</code>).</td>
</tr>
<tr>
<td><code>.while</code></td>
<td>Enables the object WHILE expression is true (ie sets both the start and end). (cannot be combined with <code>.start</code>, <code>.end</code> or <code>.duration</code> )</td>
</tr>
<tr>
<td><code>.duration</code></td>
<td>The duration of an object</td>
</tr>
<tr>
<td><code>.repeating</code></td>
<td>Makes the object repeat with given interval</td>
</tr>
</tbody></table>
<p>If <code>.end</code>, <code>.duration</code> or <code>.while</code> is not set, the object will run indefinitely.</p>
<p><strong>Examples</strong></p>
<pre><code class="language-javascript"><span class="hl-1">{</span><br/><span class="hl-1">   </span><span class="hl-9">enable</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-9">start</span><span class="hl-1">: </span><span class="hl-4">&#39;#abc.end + 5&#39;</span><span class="hl-1">, </span><span class="hl-5">// Start 5 seconds after #abc ends</span><br/><span class="hl-1">      </span><span class="hl-9">duration</span><span class="hl-1">: </span><span class="hl-4">&#39;#abc.duration&#39;</span><span class="hl-1"> </span><span class="hl-5">// Have the same duration as #abc</span><br/><span class="hl-1">   }</span><br/><span class="hl-1">}</span>
</code></pre>
<p><a href="https://jsfiddle.net/nytamin/kq6wfcov/">Try it in JSFiddle!</a></p>
<pre><code class="language-javascript"><span class="hl-1">{</span><br/><span class="hl-1">   </span><span class="hl-9">enable</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-10">while</span><span class="hl-1">: </span><span class="hl-4">&#39;#abc&#39;</span><span class="hl-1">, </span><span class="hl-5">// Enable while #abc is enabled</span><br/><span class="hl-1">   }</span><br/><span class="hl-1">}</span>
</code></pre>
<p><a href="https://jsfiddle.net/nytamin/qjw7hL5x/">Try it in JSFiddle!</a></p>

<a href="#state-amp-layers" id="state-amp-layers" style="color: inherit; text-decoration: none;">
  <h2>State &amp; Layers</h2>
</a>
<p>All objects will be resolved to a <strong>layer</strong> in the calculated <strong>state</strong>. There are a few rules:</p>
<ul>
<li>Only <strong>one</strong> object can exist on a layer at the same time.</li>
<li>If two (or more) objects fight for the place on a layer:<ul>
<li>The one with highest <code>.priority</code> will win.</li>
<li>If tied, the one with <em>latest start time</em> will win.</li>
</ul>
</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="language-javascript"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-9">id</span><span class="hl-1">: </span><span class="hl-4">&#39;A&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">layer</span><span class="hl-1">: </span><span class="hl-4">&#39;L1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">enable</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-9">start</span><span class="hl-1">: </span><span class="hl-7">10</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-9">end</span><span class="hl-1">: </span><span class="hl-7">100</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-9">content</span><span class="hl-1">: {},</span><br/><span class="hl-1">},</span><br/><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-9">id</span><span class="hl-1">: </span><span class="hl-4">&#39;B&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">layer</span><span class="hl-1">: </span><span class="hl-4">&#39;L1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">enable</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-9">start</span><span class="hl-1">: </span><span class="hl-7">50</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-9">end</span><span class="hl-1">: </span><span class="hl-7">10</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-9">content</span><span class="hl-1">: {},</span><br/><span class="hl-1">}</span><br/><span class="hl-5">// This will cause the timeline to be:</span><br/><span class="hl-5">// A on layer L1 for 10 - 50</span><br/><span class="hl-5">// B on layer L1 for 50 - 60</span><br/><span class="hl-5">// A on layer L1 for 60 - 100 (since B has stopped)</span><br/>
</code></pre>
<p><a href="https://jsfiddle.net/nytamin/excb84ky/">Try it in JSFiddle!</a></p>

<a href="#references" id="references" style="color: inherit; text-decoration: none;">
  <h2>References</h2>
</a>

<a href="#reference-types" id="reference-types" style="color: inherit; text-decoration: none;">
  <h3>Reference types</h3>
</a>
<table>
<thead>
<tr>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td><code>#objId</code></td>
<td>Reference to the object that has the specified <strong>.id</strong></td>
</tr>
<tr>
<td><code>.className</code></td>
<td>Reference to any object that has the class-name in its <strong>.classes</strong></td>
</tr>
<tr>
<td><code>$layerName</code></td>
<td>Reference to any object that is on the specified layer (<strong>.layer</strong>)</td>
</tr>
</tbody></table>

<a href="#reference-modifiers" id="reference-modifiers" style="color: inherit; text-decoration: none;">
  <h4>Reference modifiers</h4>
</a>
<p>The references listed above can be modified:</p>
<table>
<thead>
<tr>
<th>Example</th>
<th>Description</th>
</tr>
</thead>
<tbody><tr>
<td>#objId.start</td>
<td>Refer to the start of the object</td>
</tr>
<tr>
<td>#objId.end</td>
<td>Refer to the end of the object</td>
</tr>
<tr>
<td>#objId.duration</td>
<td>Refer to the duration of the object</td>
</tr>
</tbody></table>

<a href="#reference-combinations" id="reference-combinations" style="color: inherit; text-decoration: none;">
  <h3>Reference combinations</h3>
</a>
<p>The references can be combined using basic math expressions ( + - * / % ) and logical operators ( &amp; | ! )</p>
<p><strong>Examples</strong></p>
<pre><code class="language-javascript"><span class="hl-1">{</span><br/><span class="hl-1">   </span><span class="hl-9">enable</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-9">start</span><span class="hl-1">: </span><span class="hl-4">&#39;#abc.start + #abc.duration / 2&#39;</span><span class="hl-1">, </span><span class="hl-5">// Start halfway in</span><br/><span class="hl-1">   }</span><br/><span class="hl-1">}</span>
</code></pre>
<p><a href="https://jsfiddle.net/nytamin/2jmsgu6h/">Try it in JSFiddle!</a></p>
<pre><code class="language-javascript"><span class="hl-1">{</span><br/><span class="hl-1">   </span><span class="hl-9">enable</span><span class="hl-1">: {</span><br/><span class="hl-1">      </span><span class="hl-10">while</span><span class="hl-1">: </span><span class="hl-4">&#39;#sun &amp; #moon &amp; !#jupiter&#39;</span><span class="hl-1">, </span><span class="hl-5">// Enable while #sun and #moon, but not #jupiter</span><br/><span class="hl-1">   }</span><br/><span class="hl-1">}</span>
</code></pre>
<p><a href="https://jsfiddle.net/nytamin/nuobkgdw/">Try it in JSFiddle!</a></p>
<hr>

<a href="#keyframes" id="keyframes" style="color: inherit; text-decoration: none;">
  <h2>Keyframes</h2>
</a>
<p>It is also possible to add keyframes to an object. A keyframe can have the same logics as normal timeline objects, and when &quot;enabled&quot;, it applies it&#39;s <code>.content</code> on its parent object&#39;s <code>.content</code>.
<strong>Example</strong></p>
<pre><code class="language-javascript"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-9">id</span><span class="hl-1">: </span><span class="hl-4">&#39;myObj&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">layer</span><span class="hl-1">: </span><span class="hl-4">&#39;L1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">enable</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-9">start</span><span class="hl-1">: </span><span class="hl-7">10</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-9">end</span><span class="hl-1">: </span><span class="hl-7">100</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-9">content</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-9">opacity</span><span class="hl-1">: </span><span class="hl-7">100</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-9">keyframes</span><span class="hl-1">: [{</span><br/><span class="hl-1">        </span><span class="hl-2">id:</span><span class="hl-1">  </span><span class="hl-4">&#39;kf0&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">enable:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-7">5</span><span class="hl-1">, </span><span class="hl-5">// relative to parent, so will start at 15</span><br/><span class="hl-1">            </span><span class="hl-2">duration:</span><span class="hl-1"> </span><span class="hl-7">10</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-2">content:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">opacity:</span><span class="hl-1"> </span><span class="hl-7">0</span><br/><span class="hl-1">        }</span><br/><span class="hl-1">    }]</span><br/><span class="hl-1">}</span><br/><span class="hl-5">// This will cause the object to be</span><br/><span class="hl-5">// * Enabled between 10 - 100</span><br/><span class="hl-5">// * Have opacity = 100 between 10 - 15, and 25 - 100</span><br/><span class="hl-5">// * Have opacity = 0 between 15 - 25</span>
</code></pre>

<a href="#groups" id="groups" style="color: inherit; text-decoration: none;">
  <h2>Groups</h2>
</a>
<p>It is also possible to add groups that contain other objects as children. The children will always be capped within their parent.</p>
<p>Groups can work in 2 ways:</p>
<ul>
<li>A <em>&quot;Transparent group&quot;</em> <strong>does not</strong> have a <code>.layer</code> assigned to it (or it&#39;s set to &#39;&#39;). A transparent group does not &quot;collide&quot; with other objects, nor be visible in the calculated state. But its children objects will always be put on the timeline.</li>
<li>A <em>&quot;Normal group&quot;</em> <strong>does</strong> have a <code>.layer</code> assigned to it. This means that the group works the same way as normal objects, and can collide with them. The children of the group will only be enabled while the parent is enabled.</li>
</ul>
<p><strong>Example</strong></p>
<pre><code class="language-javascript"><span class="hl-1">{</span><br/><span class="hl-1">    </span><span class="hl-9">id</span><span class="hl-1">: </span><span class="hl-4">&#39;myGroup&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">layer</span><span class="hl-1">: </span><span class="hl-4">&#39;&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">enable</span><span class="hl-1">: {</span><br/><span class="hl-1">        </span><span class="hl-9">start</span><span class="hl-1">: </span><span class="hl-7">10</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-9">duration</span><span class="hl-1">: </span><span class="hl-7">10</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-9">repeat</span><span class="hl-1">: </span><span class="hl-7">20</span><span class="hl-1"> </span><span class="hl-5">// Repeat every 20 seconds, so will start at 10, 30, 50 etc...</span><br/><span class="hl-1">    },</span><br/><span class="hl-1">    </span><span class="hl-9">content</span><span class="hl-1">: {},</span><br/><span class="hl-1">    </span><span class="hl-9">isGroup</span><span class="hl-1">: </span><span class="hl-0">true</span><span class="hl-1">,</span><br/><span class="hl-1">    </span><span class="hl-9">children</span><span class="hl-1">: [{</span><br/><span class="hl-1">        </span><span class="hl-2">id:</span><span class="hl-1"> </span><span class="hl-4">&#39;child0&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">layer:</span><span class="hl-1"> </span><span class="hl-4">&#39;L1&#39;</span><span class="hl-1">,</span><br/><span class="hl-1">        </span><span class="hl-2">enable:</span><span class="hl-1"> {</span><br/><span class="hl-1">            </span><span class="hl-2">start:</span><span class="hl-1"> </span><span class="hl-7">2</span><span class="hl-1">, </span><span class="hl-5">// will repeat with parent, so will start at 12, 32, 52 etc...</span><br/><span class="hl-1">            </span><span class="hl-2">duration:</span><span class="hl-1"> </span><span class="hl-0">null</span><span class="hl-1"> </span><span class="hl-5">// Duration not set, but will be capped in parent, so will end at 20, 40, 60 etc...</span><br/><span class="hl-1">        },</span><br/><span class="hl-1">        </span><span class="hl-2">content:</span><span class="hl-1"> {},</span><br/><span class="hl-1">    }]</span><br/><br/><span class="hl-1">}</span>
</code></pre>
<p><a href="https://jsfiddle.net/nytamin/ydznup0k/">Try it in JSFiddle!</a></p>
<hr>
<p>Please note that in the examples above the times have been defined in seconds.
This is for readability only, you may use whatever time-base you like (like milliseconds) in your implementation.</p>
</div></div><div class="col-4 col-menu menu-sticky-wrap menu-highlight"><nav class="tsd-navigation primary"><ul><li class="current"><a href="modules.html">Exports</a></li></ul></nav><nav class="tsd-navigation secondary menu-sticky"><ul><li class="tsd-kind-enum"><a href="enums/EventType.html" class="tsd-kind-icon">Event<wbr/>Type</a></li><li class="tsd-kind-class"><a href="classes/Resolver.html" class="tsd-kind-icon">Resolver</a></li><li class="tsd-kind-interface"><a href="interfaces/AllStates.html" class="tsd-kind-icon">All<wbr/>States</a></li><li class="tsd-kind-interface"><a href="interfaces/Cap.html" class="tsd-kind-icon">Cap</a></li><li class="tsd-kind-interface"><a href="interfaces/ExpressionObj.html" class="tsd-kind-icon">Expression<wbr/>Obj</a></li><li class="tsd-kind-interface tsd-has-type-parameter"><a href="interfaces/InstanceEvent.html" class="tsd-kind-icon">Instance<wbr/>Event</a></li><li class="tsd-kind-interface"><a href="interfaces/NextEvent.html" class="tsd-kind-icon">Next<wbr/>Event</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolveOptions.html" class="tsd-kind-icon">Resolve<wbr/>Options</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolvedExpressionObj.html" class="tsd-kind-icon">Resolved<wbr/>Expression<wbr/>Obj</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolvedStates.html" class="tsd-kind-icon">Resolved<wbr/>States</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolvedTimeline.html" class="tsd-kind-icon">Resolved<wbr/>Timeline</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolvedTimelineObject.html" class="tsd-kind-icon">Resolved<wbr/>Timeline<wbr/>Object</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolvedTimelineObjectInstance.html" class="tsd-kind-icon">Resolved<wbr/>Timeline<wbr/>Object<wbr/>Instance</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolvedTimelineObjectInstanceKeyframe.html" class="tsd-kind-icon">Resolved<wbr/>Timeline<wbr/>Object<wbr/>Instance<wbr/>Keyframe</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolvedTimelineObjects.html" class="tsd-kind-icon">Resolved<wbr/>Timeline<wbr/>Objects</a></li><li class="tsd-kind-interface"><a href="interfaces/ResolverCacheInternal.html" class="tsd-kind-icon">Resolver<wbr/>Cache<wbr/>Internal</a></li><li class="tsd-kind-interface"><a href="interfaces/StateInTime.html" class="tsd-kind-icon">State<wbr/>In<wbr/>Time</a></li><li class="tsd-kind-interface"><a href="interfaces/TimeEvent.html" class="tsd-kind-icon">Time<wbr/>Event</a></li><li class="tsd-kind-interface"><a href="interfaces/TimelineEnable.html" class="tsd-kind-icon">Timeline<wbr/>Enable</a></li><li class="tsd-kind-interface"><a href="interfaces/TimelineKeyframe.html" class="tsd-kind-icon">Timeline<wbr/>Keyframe</a></li><li class="tsd-kind-interface"><a href="interfaces/TimelineObject.html" class="tsd-kind-icon">Timeline<wbr/>Object</a></li><li class="tsd-kind-interface"><a href="interfaces/TimelineObjectInstance.html" class="tsd-kind-icon">Timeline<wbr/>Object<wbr/>Instance</a></li><li class="tsd-kind-interface"><a href="interfaces/TimelineObjectKeyframe.html" class="tsd-kind-icon">Timeline<wbr/>Object<wbr/>Keyframe</a></li><li class="tsd-kind-interface"><a href="interfaces/TimelineState.html" class="tsd-kind-icon">Timeline<wbr/>State</a></li><li class="tsd-kind-interface"><a href="interfaces/ValueWithReference.html" class="tsd-kind-icon">Value<wbr/>With<wbr/>Reference</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Content" class="tsd-kind-icon">Content</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Duration" class="tsd-kind-icon">Duration</a></li><li class="tsd-kind-type-alias"><a href="modules.html#DurationMaybe" class="tsd-kind-icon">Duration<wbr/>Maybe</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Expression" class="tsd-kind-icon">Expression</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ExpressionEvent" class="tsd-kind-icon">Expression<wbr/>Event</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ObjectId" class="tsd-kind-icon">Object<wbr/>Id</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ResolvedExpression" class="tsd-kind-icon">Resolved<wbr/>Expression</a></li><li class="tsd-kind-type-alias"><a href="modules.html#ResolverCache" class="tsd-kind-icon">Resolver<wbr/>Cache</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Time" class="tsd-kind-icon">Time</a></li><li class="tsd-kind-type-alias"><a href="modules.html#TimeMaybe" class="tsd-kind-icon">Time<wbr/>Maybe</a></li><li class="tsd-kind-type-alias"><a href="modules.html#Times" class="tsd-kind-icon">Times</a></li><li class="tsd-kind-function"><a href="modules.html#validateIdString" class="tsd-kind-icon">validate<wbr/>Id<wbr/>String</a></li><li class="tsd-kind-function"><a href="modules.html#validateKeyframe" class="tsd-kind-icon">validate<wbr/>Keyframe</a></li><li class="tsd-kind-function"><a href="modules.html#validateObject" class="tsd-kind-icon">validate<wbr/>Object</a></li><li class="tsd-kind-function"><a href="modules.html#validateTimeline" class="tsd-kind-icon">validate<wbr/>Timeline</a></li></ul></nav></div></div></div><footer class="with-border-bottom"><div class="container"><h2>Legend</h2><div class="tsd-legend-group"><ul class="tsd-legend"><li class="tsd-kind-property tsd-parent-kind-interface"><span class="tsd-kind-icon">Property</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-constructor tsd-parent-kind-class"><span class="tsd-kind-icon">Constructor</span></li></ul><ul class="tsd-legend"><li class="tsd-kind-method tsd-parent-kind-class tsd-is-static"><span class="tsd-kind-icon">Static method</span></li></ul></div><h2>Settings</h2><p>Theme <select id="theme"><option value="os">OS</option><option value="light">Light</option><option value="dark">Dark</option></select></p></div></footer><div class="container tsd-generator"><p>Generated using <a href="https://typedoc.org/" target="_blank">TypeDoc</a></p></div><div class="overlay"></div><script src="assets/main.js"></script></body></html>